{"version":3,"file":"content_scripts/content-0.js","mappings":"AAAA","sources":["webpack://github-merge-queue-button/./content_scripts/content.js"],"sourcesContent":["(function(){if(window.mergeQueueInitialized)return;window.mergeQueueInitialized=true;let mergeQueueIntervalId;function initializeMergeQueue(){const repoPath=window.location.pathname.split(\"/\").slice(0,3).join(\"/\");fetch(repoPath+\"/queue\",{credentials:\"include\"}).then(response=>{if(response.ok){if(!document.querySelector(\".merge-queue-button\")){insertMergeQueueButton(repoPath)}if(mergeQueueIntervalId){clearInterval(mergeQueueIntervalId)}updateJobCount(repoPath);mergeQueueIntervalId=setInterval(()=>updateJobCount(repoPath),3e4)}else{console.log(\"Merge queue not enabled for this repo.\")}}).catch(error=>{console.error(\"Error checking merge queue status:\",error)})}function insertMergeQueueButton(repoPath){const nav=document.querySelector(\".UnderlineNav-body\");if(!nav)return;const prTab=nav.querySelector('a[href*=\"/pulls\"]');if(prTab){const queueTab=document.createElement(\"a\");queueTab.href=repoPath+\"/queue\";queueTab.className=\"UnderlineNav-item merge-queue-button\";const svgIcon=document.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\");svgIcon.setAttribute(\"class\",\"octicon octicon-git-merge color-fg-muted UnderlineNav-octicon d-none d-sm-inline\");svgIcon.setAttribute(\"viewBox\",\"0 0 16 16\");svgIcon.setAttribute(\"version\",\"1.1\");svgIcon.setAttribute(\"width\",\"16\");svgIcon.setAttribute(\"height\",\"16\");svgIcon.setAttribute(\"aria-hidden\",\"true\");const path=document.createElementNS(\"http://www.w3.org/2000/svg\",\"path\");path.setAttribute(\"d\",\"M5.45 5.154A4.25 4.25 0 0 0 9.25 7.5h1.378a2.251 2.251 0 1 1 0 1.5H9.25A5.734 5.734 0 0 1 5 7.123v3.505a2.25 2.25 0 1 1-1.5 0V5.372a2.25 2.25 0 1 1 1.95-.218ZM4.25 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm8.5-4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM5 3.25a.75.75 0 1 0 0 .005V3.25Z\");svgIcon.appendChild(path);const textNode=document.createTextNode(\" Merge Queue\");queueTab.appendChild(svgIcon);queueTab.appendChild(textNode);const jobCount=document.createElement(\"span\");jobCount.className=\"Counter\";jobCount.textContent=\"â€¦\";queueTab.appendChild(jobCount);prTab.parentNode.insertBefore(queueTab,prTab.nextSibling)}}function updateJobCount(repoPath){if(!document.querySelector(\".merge-queue-button\")){insertMergeQueueButton(repoPath)}const url=repoPath+\"/queue/main/entries\";fetch(url,{credentials:\"include\"}).then(response=>response.text()).then(html=>{const parser=new DOMParser;const doc=parser.parseFromString(html,\"text/html\");const jobItems=doc.querySelectorAll(\"li.Box-row\");const count=jobItems.length;const counter=document.querySelector(\".merge-queue-button .Counter\");if(counter){counter.textContent=count>0?count:\"\"}}).catch(error=>{console.error(\"Error fetching merge queue entries:\",error)})}initializeMergeQueue()})();"],"names":[],"sourceRoot":""}